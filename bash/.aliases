#!/bin/bash

#   Repeat previous command with sudo
alias plz='sudo $(history -p \!\!)'

#   Use htop rather than top
if hash htop 2>/dev/null;
then
    alias top='htop'
fi

#   connman
alias con='connmanctl'

#   nmcli
alias n='nmcli'

#   transmission
alias tm='transmission-remote'
alias tmd='transmission-daemon'

#   Long list of everything
alias ll='ls -AlhF --color=auto'
#   List hidden
alias la='ls -A --color=auto'
#   Classify and list by column
alias l='ls -CF --color=auto'

# shellcheck disable=SC2154
#   Machine is sourced in .bashrc
if [ "${machine}" = "Mac" ]
then
    alias ll='ls -AlhFG'
    alias la='ls -AG'
    #   Classify and list by column
    alias l='ls -CFG'
fi

#   df default
alias df="df -Th --total"

#   mv and cp default
alias mv="mv -i"
alias cp="cp -i"

#   free default
alias free="free -mt"

#   ps default
alias ps="ps auxf"

#   mkdir default create parents
alias mkdir="mkdir -p"

#   wget continue downloading in case of problem
alias wget="wget -c"

#   Search for files
alias fhere='find . -name '

#   Search files for string
#       Search .gitignore and hidden files without git folder
#       case-insensitively with extended pattern
alias fsearch='rg -uu -g "!.git/" -i . -e '

#   List IP
alias myip="curl http://ipecho.net/plain; echo"

# check internet connection
alias online='wget -q --spider szybia.com'

#   listen to processes on network
alias listen="lsof -P -i -n"

#   hilarious
alias busy="hexdump -C < /dev/urandom | grep 'ca fe'"

#   Make cd quicker
alias cd..='cd ../'
alias ..='cd ../'
alias ...='cd ../../'
alias ....='cd ../../../'

#   Popular command shortcuts
alias dl="cd ~/downloads"
alias h="history"
alias r="ranger"
alias v='vim'

#   Tmux
#   This fixes a problem which messes up the LS_COLORS
alias tmux="tmux -2"

#   Open file explorer
alias wh='nohup thunar . &>/dev/null &'
alias wx='nohup thunar . &>/dev/null & exit'
if [ "${machine}" == "Mac" ]
then
    alias wh='open .'
    alias wx='wh & exit'
fi

#   Coloured grep
alias grep="grep --color=auto"

#   ripgrep search hidden files
alias rgh="rg --hidden -g '!.git/*' -i"

#   Stopwatch
alias timer='echo "Timer started. Stop with Ctrl-D." && date && time cat && date'

#   curl API | pretty
alias pretty='python -m json.tool'

#   easier clipboard
alias ccopy='xclip -selection clipboard'
alias cpaste='xclip -selection clipboard -o'
if [ "${machine}" = "Mac" ]
then
    alias cpaste='pbpaste'
    alias ccopy='pbcopy'
fi

#   print readable PATH
alias path='echo -e ${PATH//:/\\n}'

#   Copy SSH private key
alias prikey="ccopy < ~/.ssh/id_ed25519 | echo '=> Private key copied to pasteboard.'"

#   Copy SSH public key
alias pubkey="ccopy < ~/.ssh/id_ed25519.pub | echo '=> Public key copied to pasteboard.'"

#   Microphone mute/unmute
alias micoff='amixer set Capture nocap'
alias micon='amixer set Capture cap'

#   Arch remove orphans
alias remove_orphans='sudo pacman -Rns $(pacman -Qtdq)'

#   USBGuard
alias usbl="usbguard list-devices"
alias usba="usbguard allow-device"
alias usbb="usbguard block-device"

#   youtube-dl
alias youtube-audio='youtube-dl -x --audio-format mp3'

#   calcurse
alias cal='calcurse'

#   clear screen
#       keeps previous output while allowing for
#       distuingishing the gap between commands
alias clear_man="for i in {1..100}; do echo; done"

#   escape all special characters
alias escape="sed 's/[^a-zA-Z0-9]/\\\&/g'"

#   Vagrant aliases
alias vll="vagrant global-status --prune"
alias vd="vagrant destroy"
alias vssh="vagrant ssh"

#   git typo
alias gti="git"


# ------------------------------------
# Docker aliases and functions
#   credit: https://github.com/tcnksm/docker-alias
# ------------------------------------

alias dk="docker"
alias dcom="docker-compose"

# Get container process
alias dps="docker ps"

# Get process included stop container
alias dpa="docker ps -a"

# Get images
alias di="docker images"

# Remove image shortcut
alias dri='docker rmi'

# Remove all <none> images
alias drmnone='docker rmi $(docker images -f "dangling=true" -q)'

# Get container IP
alias dip="docker inspect --format '{{ .NetworkSettings.IPAddress }}'"

# Run aliase
alias dr="docker run"

# Run deamonized container, e.g., $dkd base /bin/echo hello
alias dkd="docker run -d -P"

# Run interactive container, e.g., $dki base /bin/bash
alias dki="docker run -i -t -P"

# Execute interactive container, e.g., $dex base /bin/bash
alias dex="docker exec -i -t"

# Stop and remove all containers
alias dsrm='docker stop $(docker ps -a -q) && docker rm $(docker ps -a -q)'

# Kill and remove all containers
alias dkrm='docker kill $(docker ps -a -q) || docker rm $(docker ps -a -q) || true'

# Prune all containers
alias dprune='docker container prune -f'

